@model NHS111.Models.Models.Web.OutcomeViewModel

@using (Html.BeginForm("ServiceList", "Outcome", FormMethod.Post, new { id = "seeServicesThatCanHelpForm" }))
{
    @Html.HiddenFor(x => Model.Id)
    @Html.HiddenFor(x => Model.JourneyJson)
    @Html.HiddenFor(x => Model.PathwayId)
    @Html.HiddenFor(x => Model.JourneyId)
    @Html.HiddenFor(x => Model.PathwayNo)
    @Html.HiddenFor(x => Model.PathwayTraumaType)
    @Html.HiddenFor(x => Model.SymptomGroup)
    @Html.HiddenFor(x => Model.FilterServices)
    @Html.HiddenFor(x => Model.DigitalTitle)
    @Html.HiddenFor(x => Model.UserInfo.Demography.Age)
    @Html.HiddenFor(x => Model.UserInfo.Demography.Gender)
    @Html.HiddenFor(x => Model.SymptomDiscriminatorCode)
    @Html.HiddenFor(x => Model.Title)
    @Html.HiddenFor(x => Model.PathwayTitle)
    @Html.HiddenFor(x => Model.EntrySearchTerm)
    @Html.HiddenFor(x => Model.SessionId)
    @Html.HiddenFor(x => Model.TimeFrameText)
    @Html.HiddenFor(x => Model.SymptomDiscriminator.ReasoningText)
    @Html.HiddenFor(x => Model.OutcomeGroup.Id)
    @Html.HiddenFor(x => Model.OutcomeGroup.Text)
    @Html.HiddenFor(x => Model.OutcomeGroup.Label)
    @Html.HiddenFor(x => Model.OutcomeGroup.ITK)
    @Html.Hidden("CurrentView", ((RazorView)ViewContext.View).ViewPath)
    @Html.HiddenFor(x => x.DispositionTime)
    @Html.HiddenFor(x => x.TimeFrameMinutes)
    @Html.HiddenFor(x => x.WaitTimeText)
    @Html.HiddenFor(x => x.SurveyLink.SurveyId)
    @Html.HiddenFor(x => x.SurveyLink.PathwayNo)
    @Html.HiddenFor(x => x.SurveyLink.EndPathwayNo)
    @Html.HiddenFor(x => x.SurveyLink.EndPathwayTitle)
    @Html.HiddenFor(x => x.SurveyLink.DigitalTitle)
    @Html.HiddenFor(x => x.SurveyLink.DispositionCode)
    @Html.HiddenFor(x => x.SurveyLink.JourneyId)
    @Html.HiddenFor(x => x.SurveyLink.DispositionDateTime)
    @Html.HiddenFor(x => x.SurveyLink.Campaign)
    @Html.HiddenFor(x => x.SurveyLink.CampaignSource)
    @Html.HiddenFor(x => x.SurveyLink.ServiceCount)
    @Html.HiddenFor(x => x.SurveyLink.ServiceOptions)
    @Html.HiddenFor(x => Model.Campaign)
    @Html.HiddenFor(x => Model.Source)
    @Html.HiddenFor(x => Model.HasAcceptedCallbackOffer)
    @Html.HiddenFor(x => Model.CurrentPostcode)
    @Html.Partial("_CommonHiddenFieldsCareAdviceViewModel", Model)

    <button class="button--link nhsuk-u-margin-top-4" type="submit" name="DosResults" id="DosLookup">See pharmacies that can help</button>
}
@Html.Partial("_PageLoadingIndicator")
<script type="text/javascript">
    $(document).ready(function () {
        stopPageLoadingIndicator();
    });

    $('#DosLookup').css('cursor', 'pointer');
    $(document).on('click', '#DosLookup', function (event) {
        if ($("#findServicesForm").valid()) {
            var $postcode = $('#FindService_CurrentPostcode').val();
            startPageLoadingIndicator('Searching for services near to ' + $postcode + '...');
        }
    });

    window.onpageshow = function (event) {
        stopPageLoadingIndicator();
    };
</script>