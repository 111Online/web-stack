@using NHS111.Models.Models.Web
@inherits NHS111.Web.Views.Shared.SurveyLinkView<SendSmsOutcomeViewModel>
@{
    Layout = "~/Views/Shared/_LayoutNhsUk.cshtml";
}

@section Title {
    NHS 111 - Thanks for providing your details
}

@section HeadTop {
    @{ var url = string.Format("/outcome/{0}/{1}/{2}/disposition/", Url.Encode(Model.PathwayNo), Url.Encode(Model.OutcomeGroup.Text), Url.Encode(Model.Id)); }
    <script>
        var pageId = '@Model.Id';
        dataLayer = [
        {
            'virtualPageUrl': '@url',
            'virtualPageTitle': '@Model.TitleWithoutBullets'
        }];
    </script>
}

<div class="nhsuk-core measure">
    <h1 class="nhsuk-heading-l">Check your details</h1>
    <dl class="summary-list">
        <div>
            <dt>Mobile number</dt>
            <dd>@Model.MobileNumber</dd>
        </div>

        <div>
            <dt>Age</dt>
            <dd>@Model.Age</dd>
        </div>

        <div>
            <dt>Days ago symptoms started</dt>
            <dd>@Model.SymptomsStartedDaysAgo</dd>
        </div>

        <div>
            <dt>Do you live alone</dt>
            <dd>@string.Format("{0}", Model.LivesAlone ? "Yes" : "No")</dd>
        </div>
    </dl>

    @using (Html.BeginForm("SendSMS", "Outcome", FormMethod.Post, new { id = "submitDetailsForm" }))
    {
        @Html.Partial("_CommonHiddenFieldsOutcomeViewModel", Model)
        @Html.Partial("_CommonHiddenFieldsCareAdviceViewModel", Model)
        @Html.Partial("_commonHiddenFieldsSendsSMSViewModel", Model)
        @Html.HiddenFor(m => m.SelectedServiceId)
        <button id="book-call" class="nhsuk-u-margin-top-5">Sign up now</button>
    }
</div>

@Html.Partial("_PageLoadingIndicator")

<script>
    $(document).on('submit', '#submitDetailsForm', function () {
        startPageLoadingIndicator('Sending your details...')
    })
</script>