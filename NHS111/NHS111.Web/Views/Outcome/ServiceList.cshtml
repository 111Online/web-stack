@using NHS111.Models.Models.Domain
@model NHS111.Models.Models.Web.OutcomeViewModel

@{
    Layout = "~/Views/Shared/_LayoutNhsUk.cshtml";
}

@section Title {
    Select a service
}

@section OuterSection {

}

@section FeedbackSection {
    @Html.Partial("_FeedbackDetails", new Feedback() { PageId = Model.Id })
}

<link href="~/content/css_NhsUk/servicelist.css" media="screen" rel="stylesheet" type="text/css" />
<link href="~/content/css_NhsUk/service.css" media="screen" rel="stylesheet" type="text/css" />

<section>
    <div class="section-item">
        <h3 class="section-header">
            Recommended service
        </h3>
        @if (Model.CheckCapacitySummaryResultList.FirstOrDefault() != null)
        {
            <div class="service-list-content">
                @Html.Partial("_SelectedService", Model.CheckCapacitySummaryResultList.First())
                <div class="form-item-wrapper">
                    <fieldset>
                        <div class="form-group">
                            @using (Html.BeginForm("PersonalDetails", "Outcome", FormMethod.Post))
                            {
                                @Html.Partial("_CommonHiddenFieldsOutcomeViewModel", Model)
                                @Html.Hidden("SelectedServiceId", @Model.CheckCapacitySummaryResultList.First().IdField)
                                <div class="row">
                                    <input class="button button-next" type="submit" name="PersonalDetails" value="Request a call back" />
                                </div>
                            }
                        </div>
                    </fieldset>
                </div>
            </div>
        }
    </div>
</section>

<section>
    <div class="section-item last">
        <h3 class="section-header">
            Other services near you
        </h3>
        @foreach (var checkCapacitySummaryResult in Model.CheckCapacitySummaryResultList.Skip(1))
        {
            <div class="service-list-content">
                @Html.Partial("_SelectedService", checkCapacitySummaryResult)
                <fieldset>
                    <div class="form-group">
                        @using (Html.BeginForm("PersonalDetails", "Outcome", FormMethod.Post))
                        {
                            @Html.Partial("_CommonHiddenFieldsOutcomeViewModel", Model)
                            @Html.Hidden("SelectedServiceId", checkCapacitySummaryResult.IdField)
                            <div class="row">
                                <input class="button button-next button-link" type="submit" name="PersonalDetails" value="Request a call back" />
                            </div>
                        }
                    </div>
                </fieldset>

            </div>
        }
    </div>
</section>
